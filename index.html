<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login / Signup ‚Äî Firebase Auth (Google + Email)</title>
  <style>
    :root{
      --bg:#4578ff; --card:#fff; --accent:#0b73c9; --muted:#7b8aa3;
      --radius:12px; --gap:18px; font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }
    body{margin:0;background:linear-gradient(180deg,var(--bg),#3b67e6);min-height:100vh;
      display:flex;align-items:center;justify-content:center;padding:28px;}
    .wrap{display:grid;grid-template-columns:1fr 1fr;gap:28px;max-width:1100px;width:100%;}
    .card{
      background:var(--card); border-radius:var(--radius); box-shadow:0 8px 30px rgba(2,12,40,.18);
      padding:30px; transition:transform .28s ease, box-shadow .28s ease; overflow:hidden;
    }
    .card:hover{transform:translateY(-6px);box-shadow:0 18px 50px rgba(2,12,40,.22);}
    h2{margin:0 0 12px;font-size:28px;color:#101828;text-align:center;font-weight:700;}
    form{display:flex;flex-direction:column;gap:12px}
    .input{
      border:1px solid #e6e9ef;padding:12px 14px;border-radius:8px;font-size:15px;
      outline:none;transition:box-shadow .18s ease,border-color .12s ease;
    }
    .input:focus{box-shadow:0 6px 24px rgba(11,115,201,0.12);border-color:var(--accent);}
    .btn{
      display:inline-block;padding:12px 16px;border-radius:10px;border:none;font-weight:600;
      cursor:pointer;background:linear-gradient(180deg,var(--accent),#0862a6);color:#fff;font-size:15px;
    }
    .btn.ghost{background:#f5f7fa;color:#2b3440;border:1px solid #e6e9ef;}
    .small{font-size:13px;color:var(--muted);text-align:center;margin-top:8px;}
    .link{color:var(--accent);cursor:pointer;text-decoration:underline}
    .or{display:flex;align-items:center;gap:12px;color:var(--muted);margin:8px 0;font-size:13px}
    .or:before,.or:after{content:"";height:1px;background:#eee;flex:1}
    .social-btn{display:flex;gap:10px;flex-direction:column}
    .social{
      display:flex;align-items:center;gap:12px;padding:10px;border-radius:8px;border:1px solid #e6e9ef;cursor:pointer;
    }
    .social .icon{width:28px;height:28px;border-radius:50%;display:inline-grid;place-items:center;background:#fff;}
    .error{color:#b00020;font-size:13px}
    .success{color:green;font-size:13px}
    .toggle{display:flex;justify-content:center;gap:8px;margin-top:6px}
    /* responsive */
    @media (max-width:900px){.wrap{grid-template-columns:1fr;}}
  </style>
</head>
<body>

  <div class="wrap">
    <!-- LOGIN CARD -->
    <div class="card" id="loginCard">
      <h2>Login</h2>
      <form id="loginForm" autocomplete="off">
        <input class="input" id="loginEmail" type="email" placeholder="Email" required />
        <div style="display:flex;gap:8px;align-items:center;">
          <input class="input" id="loginPassword" type="password" placeholder="Password" style="flex:1" required />
          <button type="button" id="toggleLoginPwd" class="btn ghost" style="padding:8px 10px;">üëÅÔ∏è</button>
        </div>

        <div style="display:flex;justify-content:space-between;align-items:center">
          <div class="small"><a class="link" id="showSignup">Don't have an account? Signup</a></div>
          <button type="submit" class="btn">Login</button>
        </div>

        <div class="or">Or</div>

        <div class="social-btn">
          <div class="social" id="googleLogin">
            <div class="icon"><img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="G" width="18"/></div>
            <div>Login with Google</div>
          </div>
        </div>

        <div id="loginMsg" style="margin-top:8px"></div>
      </form>
    </div>

    <!-- SIGNUP CARD -->
    <div class="card" id="signupCard">
      <h2>Signup</h2>
      <form id="signupForm" autocomplete="off">
        <input class="input" id="signupEmail" type="email" placeholder="Email" required />
        <input class="input" id="signupPassword" type="password" placeholder="Create password" required />
        <input class="input" id="signupConfirm" type="password" placeholder="Confirm password" required />

        <div style="display:flex;justify-content:space-between;align-items:center">
          <div class="small"><a class="link" id="showLogin">Already have an account? Login</a></div>
          <button type="submit" class="btn">Signup</button>
        </div>

        <div class="or">Or</div>

        <div class="social-btn">
          <div class="social" id="googleSignup">
            <div class="icon"><img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="G" width="18"/></div>
            <div>Signup with Google</div>
          </div>
        </div>

        <div id="signupMsg" style="margin-top:8px"></div>
      </form>
    </div>
  </div>

  <!-- Firebase + App script (module) -->
  <script type="module">
    // ----- IMPORT FIREBASE (modular) -----
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import {
      getAuth,
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword,
      GoogleAuthProvider,
      signInWithPopup,
      signOut,
      onAuthStateChanged,
      sendEmailVerification
    } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";

    // ====== ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡§æ firebaseConfig ‡§°‡§æ‡§≤‡•á‡§Ç ======
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
      appId: "YOUR_APP_ID",
      // ...‡§¨‡§ö‡§æ ‡§π‡•Å‡§Ü config
    };
    // ============================================

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // UI elements
    const loginForm = document.getElementById("loginForm");
    const signupForm = document.getElementById("signupForm");
    const loginMsg = document.getElementById("loginMsg");
    const signupMsg = document.getElementById("signupMsg");
    const googleLogin = document.getElementById("googleLogin");
    const googleSignup = document.getElementById("googleSignup");
    const showSignup = document.getElementById("showSignup");
    const showLogin = document.getElementById("showLogin");
    const toggleLoginPwd = document.getElementById("toggleLoginPwd");

    // Small helpers
    function showMessage(el, text, ok=true){
      el.innerHTML = text ? `<div class="${ok?'success':'error'}">${text}</div>` : "";
    }
    function clearMessages(){ showMessage(loginMsg,""); showMessage(signupMsg,""); }

    // Toggle views
    showSignup.addEventListener("click", (e)=>{ e.preventDefault(); document.getElementById('signupCard').scrollIntoView({behavior:'smooth'}); });
    showLogin.addEventListener("click", (e)=>{ e.preventDefault(); document.getElementById('loginCard').scrollIntoView({behavior:'smooth'}); });

    // Toggle password visibility for login
    toggleLoginPwd.addEventListener("click", ()=>{
      const p = document.getElementById("loginPassword");
      p.type = p.type === "password" ? "text" : "password";
      toggleLoginPwd.textContent = p.type === "password" ? "üëÅÔ∏è" : "üôà";
    });

    // SIGNUP with email/password
    signupForm.addEventListener("submit", async (e)=>{
      e.preventDefault(); clearMessages();
      const email = document.getElementById("signupEmail").value.trim();
      const pass = document.getElementById("signupPassword").value;
      const conf = document.getElementById("signupConfirm").value;
      if(pass.length < 6){ showMessage(signupMsg,"Password ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 6 ‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§ï‡§æ ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§", false); return; }
      if(pass !== conf){ showMessage(signupMsg,"Password ‡§î‡§∞ Confirm password ‡§Æ‡•á‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§ñ‡§æ‡§§‡•á‡•§", false); return; }

      try{
        const userCred = await createUserWithEmailAndPassword(auth, email, pass);
        // ‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï: verification email ‡§≠‡•á‡§ú‡•á‡§Ç
        try { await sendEmailVerification(userCred.user); showMessage(signupMsg,"Account ‡§¨‡§®‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ email verify ‡§ï‡§∞‡•á‡§Ç‡•§"); }
        catch(err){ showMessage(signupMsg,"Account ‡§¨‡§®‡§æ ‡§™‡§∞ verification ‡§≠‡•á‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§", false); console.error(err); }
      }catch(err){
        console.error(err);
        showMessage(signupMsg, err.message || "Signup ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à‡•§", false);
      }
    });

    // LOGIN with email/password
    loginForm.addEventListener("submit", async (e)=>{
      e.preventDefault(); clearMessages();
      const email = document.getElementById("loginEmail").value.trim();
      const pass = document.getElementById("loginPassword").value;
      try{
        const userCred = await signInWithEmailAndPassword(auth, email, pass);
        showMessage(loginMsg,`Welcome ${userCred.user.email}`); // ‡§Ø‡§π‡§æ‡§Å redirect ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç
      }catch(err){
        console.error(err);
        showMessage(loginMsg, err.message || "Login ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§", false);
      }
    });

    // GOOGLE SIGN IN (popup)
    async function signInWithGoogleFlow(){
      clearMessages();
      try{
        const res = await signInWithPopup(auth, provider);
        // res.user contains user info
        showMessage(loginMsg, `Signed in as ${res.user.email}`);
      }catch(err){
        console.error(err);
        showMessage(loginMsg, "Google sign-in ‡§∞‡§¶‡•ç‡§¶ ‡§Ø‡§æ ‡§Ö‡§∏‡§´‡§≤‡•§", false);
      }
    }
    googleLogin.addEventListener("click", signInWithGoogleFlow);
    googleSignup.addEventListener("click", signInWithGoogleFlow);

    // Optional: observe auth state
    onAuthStateChanged(auth, user => {
      if(user){
        // user logged in
        console.log("User:", user.email, user.uid);
        // ‡§Ü‡§™ ‡§Ø‡§π‡§æ‡§Å redirect ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‚Äî ‡§â‡§¶‡§æ‡§π‡§∞‡§£:
        // window.location.href = "/dashboard.html";
      } else {
        console.log("No user");
      }
    });

    // OPTIONAL: sign out helper (debugging)
    // window.mySignOut = async ()=>{ await signOut(auth); alert('Signed out'); };

  </script>
</body>
</html>
